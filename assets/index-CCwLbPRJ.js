var xn=Object.defineProperty;var pn=(e,t,n)=>t in e?xn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var F=(e,t,n)=>pn(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();const Mt=!1;var Ze=Array.isArray,kn=Array.prototype.indexOf,vt=Array.from,En=Object.defineProperty,we=Object.getOwnPropertyDescriptor,Ut=Object.getOwnPropertyDescriptors,Cn=Object.prototype,Sn=Array.prototype,_t=Object.getPrototypeOf;function Tn(e){return e()}function Ot(e){for(var t=0;t<e.length;t++)e[t]()}const J=2,Ht=4,$e=8,ht=16,re=32,Ee=64,Fe=128,he=256,We=512,V=1024,se=2048,Ce=4096,$=8192,Se=16384,Mn=32768,gt=65536,On=1<<17,An=1<<19,Vt=1<<20,xe=Symbol("$state"),Pn=Symbol("legacy props"),In=Symbol("");function zt(e){return e===this.v}function Nn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function mt(e){return!Nn(e,this.v)}function Rn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function jn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Dn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Bn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Yn(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function qn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ln(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Xn(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function Fn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Te=!1,Wn=!1;function Un(){Te=!0}const Hn=1,Vn=2,zn=16,Gn=1,Kn=2,Jn=4,Qn=8,Zn=16,$n=1,er=2,U=Symbol();function K(e,t){var n={f:0,v:e,reactions:null,equals:zt,rv:0,wv:0};return n}function q(e){return tr(K(e))}function Gt(e,t=!1){var r;const n=K(e);return t||(n.equals=mt),Te&&R!==null&&R.l!==null&&((r=R.l).s??(r.s=[])).push(n),n}function tr(e){return N!==null&&!ae&&N.f&J&&(ee===null?ur([e]):ee.push(e)),e}function A(e,t){return N!==null&&!ae&&je()&&N.f&(J|ht)&&(ee===null||!ee.includes(e))&&Fn(),Kt(e,t)}function Kt(e,t){return e.equals(t)||(e.v,e.v=t,e.wv=_n(),Jt(e,se),je()&&P!==null&&P.f&V&&!(P.f&(re|Ee))&&(ie===null?fr([e]):ie.push(e))),t}function Jt(e,t){var n=e.reactions;if(n!==null)for(var r=je(),l=n.length,i=0;i<l;i++){var a=n[i],f=a.f;f&se||!r&&a===P||(ne(a,t),f&(V|he)&&(f&J?Jt(a,Ce):nt(a)))}}let Qt=!1;function D(e,t=null,n){if(typeof e!="object"||e===null||xe in e)return e;const r=_t(e);if(r!==Cn&&r!==Sn)return e;var l=new Map,i=Ze(e),a=K(0);i&&l.set("length",K(e.length));var f;return new Proxy(e,{defineProperty(u,s,h){(!("value"in h)||h.configurable===!1||h.enumerable===!1||h.writable===!1)&&qn();var c=l.get(s);return c===void 0?(c=K(h.value),l.set(s,c)):A(c,D(h.value,f)),!0},deleteProperty(u,s){var h=l.get(s);if(h===void 0)s in u&&l.set(s,K(U));else{if(i&&typeof s=="string"){var c=l.get("length"),d=Number(s);Number.isInteger(d)&&d<c.v&&A(c,d)}A(h,U),At(a)}return!0},get(u,s,h){var m;if(s===xe)return e;var c=l.get(s),d=s in u;if(c===void 0&&(!d||(m=we(u,s))!=null&&m.writable)&&(c=K(D(d?u[s]:U,f)),l.set(s,c)),c!==void 0){var g=w(c);return g===U?void 0:g}return Reflect.get(u,s,h)},getOwnPropertyDescriptor(u,s){var h=Reflect.getOwnPropertyDescriptor(u,s);if(h&&"value"in h){var c=l.get(s);c&&(h.value=w(c))}else if(h===void 0){var d=l.get(s),g=d==null?void 0:d.v;if(d!==void 0&&g!==U)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return h},has(u,s){var g;if(s===xe)return!0;var h=l.get(s),c=h!==void 0&&h.v!==U||Reflect.has(u,s);if(h!==void 0||P!==null&&(!c||(g=we(u,s))!=null&&g.writable)){h===void 0&&(h=K(c?D(u[s],f):U),l.set(s,h));var d=w(h);if(d===U)return!1}return c},set(u,s,h,c){var x;var d=l.get(s),g=s in u;if(i&&s==="length")for(var m=h;m<d.v;m+=1){var p=l.get(m+"");p!==void 0?A(p,U):m in u&&(p=K(U),l.set(m+"",p))}d===void 0?(!g||(x=we(u,s))!=null&&x.writable)&&(d=K(void 0),A(d,D(h,f)),l.set(s,d)):(g=d.v!==U,A(d,D(h,f)));var o=Reflect.getOwnPropertyDescriptor(u,s);if(o!=null&&o.set&&o.set.call(c,h),!g){if(i&&typeof s=="string"){var E=l.get("length"),C=Number(s);Number.isInteger(C)&&C>=E.v&&A(E,C+1)}At(a)}return!0},ownKeys(u){w(a);var s=Reflect.ownKeys(u).filter(d=>{var g=l.get(d);return g===void 0||g.v!==U});for(var[h,c]of l)c.v!==U&&!(h in u)&&s.push(h);return s},setPrototypeOf(){Ln()}})}function At(e,t=1){A(e,e.v+t)}var Pt,Zt,$t;function nr(){if(Pt===void 0){Pt=window;var e=Element.prototype,t=Node.prototype;Zt=we(t,"firstChild").get,$t=we(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function yt(e=""){return document.createTextNode(e)}function Ue(e){return Zt.call(e)}function et(e){return $t.call(e)}function M(e,t){return Ue(e)}function lt(e,t){{var n=Ue(e);return n instanceof Comment&&n.data===""?et(n):n}}function S(e,t=1,n=!1){let r=e;for(;t--;)r=et(r);return r}function rr(e){e.textContent=""}function _e(e){var t=J|se;P===null?t|=he:P.f|=Vt;var n=N!==null&&N.f&J?N:null;const r={children:null,ctx:R,deps:null,equals:zt,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??P};return n!==null&&(n.children??(n.children=[])).push(r),r}function bt(e){const t=_e(e);return t.equals=mt,t}function en(e){var t=e.children;if(t!==null){e.children=null;for(var n=0;n<t.length;n+=1){var r=t[n];r.f&J?wt(r):fe(r)}}}function lr(e){for(var t=e.parent;t!==null;){if(!(t.f&J))return t;t=t.parent}return null}function tn(e){var t,n=P;te(lr(e));try{en(e),t=gn(e)}finally{te(n)}return t}function nn(e){var t=tn(e),n=(ve||e.f&he)&&e.deps!==null?Ce:V;ne(e,n),e.equals(t)||(e.v=t,e.wv=_n())}function wt(e){en(e),Ie(e,0),ne(e,Se),e.v=e.children=e.deps=e.ctx=e.reactions=null}function rn(e){P===null&&N===null&&Dn(),N!==null&&N.f&he&&jn(),Et&&Rn()}function ir(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Re(e,t,n,r=!0){var l=(e&Ee)!==0,i=P,a={ctx:R,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|se,first:null,fn:t,last:null,next:null,parent:l?null:i,prev:null,teardown:null,transitions:null,wv:0};if(n){var f=pe;try{It(!0),Ct(a),a.f|=Mn}catch(h){throw fe(a),h}finally{It(f)}}else t!==null&&nt(a);var u=n&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&(Vt|Fe))===0;if(!u&&!l&&r&&(i!==null&&ir(a,i),N!==null&&N.f&J)){var s=N;(s.children??(s.children=[])).push(a)}return a}function He(e){rn();var t=P!==null&&(P.f&re)!==0&&R!==null&&!R.m;if(t){var n=R;(n.e??(n.e=[])).push({fn:e,effect:P,reaction:N})}else{var r=xt(e);return r}}function ar(e){return rn(),ln(e)}function or(e){const t=Re(Ee,e,!0);return(n={})=>new Promise(r=>{n.outro?Ve(t,()=>{fe(t),r(void 0)}):(fe(t),r(void 0))})}function xt(e){return Re(Ht,e,!1)}function ln(e){return Re($e,e,!0)}function z(e,t=[],n=_e){const r=t.map(n);return pt(()=>e(...r.map(w)))}function pt(e,t=0){return Re($e|ht|t,e,!0)}function Pe(e,t=!0){return Re($e|re,e,!0,t)}function an(e){var t=e.teardown;if(t!==null){const n=Et,r=N;Nt(!0),ce(null);try{t.call(null)}finally{Nt(n),ce(r)}}}function on(e){var t=e.deriveds;if(t!==null){e.deriveds=null;for(var n=0;n<t.length;n+=1)wt(t[n])}}function sn(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var r=n.next;fe(n,t),n=r}}function sr(e){for(var t=e.first;t!==null;){var n=t.next;t.f&re||fe(t),t=n}}function fe(e,t=!0){var n=!1;if((t||e.f&An)&&e.nodes_start!==null){for(var r=e.nodes_start,l=e.nodes_end;r!==null;){var i=r===l?null:et(r);r.remove(),r=i}n=!0}sn(e,t&&!n),on(e),Ie(e,0),ne(e,Se);var a=e.transitions;if(a!==null)for(const u of a)u.stop();an(e);var f=e.parent;f!==null&&f.first!==null&&un(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function un(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Ve(e,t){var n=[];kt(e,n,!0),fn(n,()=>{fe(e),t&&t()})}function fn(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var l of e)l.out(r)}else t()}function kt(e,t,n){if(!(e.f&$)){if(e.f^=$,e.transitions!==null)for(const a of e.transitions)(a.is_global||n)&&t.push(a);for(var r=e.first;r!==null;){var l=r.next,i=(r.f&gt)!==0||(r.f&re)!==0;kt(r,t,i?n:!1),r=l}}}function ze(e){cn(e,!0)}function cn(e,t){if(e.f&$){e.f^=$,e.f&V||(e.f^=V),De(e)&&(ne(e,se),nt(e));for(var n=e.first;n!==null;){var r=n.next,l=(n.f&gt)!==0||(n.f&re)!==0;cn(n,l?t:!1),n=r}if(e.transitions!==null)for(const i of e.transitions)(i.is_global||t)&&i.in()}}function dn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Le=!1,Ge=!1,Ke=null,pe=!1,Et=!1;function It(e){pe=e}function Nt(e){Et=e}let ut=[],Ae=0;let N=null,ae=!1;function ce(e){N=e}let P=null;function te(e){P=e}let ee=null;function ur(e){ee=e}let H=null,G=0,ie=null;function fr(e){ie=e}let vn=1,Je=0,ve=!1,R=null;function _n(){return++vn}function je(){return!Te||R!==null&&R.l===null}function De(e){var s;var t=e.f;if(t&se)return!0;if(t&Ce){var n=e.deps,r=(t&he)!==0;if(n!==null){var l,i,a=(t&We)!==0,f=r&&P!==null&&!ve,u=n.length;if(a||f){for(l=0;l<u;l++)i=n[l],(a||!((s=i==null?void 0:i.reactions)!=null&&s.includes(e)))&&(i.reactions??(i.reactions=[])).push(e);a&&(e.f^=We)}for(l=0;l<u;l++)if(i=n[l],De(i)&&nn(i),i.wv>e.wv)return!0}(!r||P!==null&&!ve)&&ne(e,V)}return!1}function cr(e,t){for(var n=t;n!==null;){if(n.f&Fe)try{n.fn(e);return}catch{n.f^=Fe}n=n.parent}throw Le=!1,e}function dr(e){return(e.f&Se)===0&&(e.parent===null||(e.parent.f&Fe)===0)}function tt(e,t,n,r){if(Le){if(n===null&&(Le=!1),dr(t))throw e;return}n!==null&&(Le=!0);{cr(e,t);return}}function hn(e,t,n=0){var r=e.reactions;if(r!==null)for(var l=0;l<r.length;l++){var i=r[l];i.f&J?hn(i,t,n+1):t===i&&(n===0?ne(i,se):i.f&V&&ne(i,Ce),nt(i))}}function gn(e){var g;var t=H,n=G,r=ie,l=N,i=ve,a=ee,f=R,u=ae,s=e.f;H=null,G=0,ie=null,N=s&(re|Ee)?null:e,ve=!pe&&(s&he)!==0,ee=null,R=e.ctx,ae=!1,Je++;try{var h=(0,e.fn)(),c=e.deps;if(H!==null){var d;if(Ie(e,G),c!==null&&G>0)for(c.length=G+H.length,d=0;d<H.length;d++)c[G+d]=H[d];else e.deps=c=H;if(!ve)for(d=G;d<c.length;d++)((g=c[d]).reactions??(g.reactions=[])).push(e)}else c!==null&&G<c.length&&(Ie(e,G),c.length=G);if(je()&&ie!==null&&!(e.f&(J|Ce|se)))for(d=0;d<ie.length;d++)hn(ie[d],e);return l!==null&&Je++,h}finally{H=t,G=n,ie=r,N=l,ve=i,ee=a,R=f,ae=u}}function vr(e,t){let n=t.reactions;if(n!==null){var r=kn.call(n,e);if(r!==-1){var l=n.length-1;l===0?n=t.reactions=null:(n[r]=n[l],n.pop())}}n===null&&t.f&J&&(H===null||!H.includes(t))&&(ne(t,Ce),t.f&(he|We)||(t.f^=We),Ie(t,0))}function Ie(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)vr(e,n[r])}function Ct(e){var t=e.f;if(!(t&Se)){ne(e,V);var n=P,r=R;P=e;try{t&ht?sr(e):sn(e),on(e),an(e);var l=gn(e);e.teardown=typeof l=="function"?l:null,e.wv=vn;var i=e.deps,a;Mt&&Wn&&e.f&se}catch(f){tt(f,e,n,r||e.ctx)}finally{P=n}}}function _r(){if(Ae>1e3){Ae=0;try{Bn()}catch(e){if(Ke!==null)tt(e,Ke,null);else throw e}}Ae++}function hr(e){var t=e.length;if(t!==0){_r();var n=pe;pe=!0;try{for(var r=0;r<t;r++){var l=e[r];l.f&V||(l.f^=V);var i=[];mn(l,i),gr(i)}}finally{pe=n}}}function gr(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];if(!(r.f&(Se|$)))try{De(r)&&(Ct(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?un(r):r.fn=null))}catch(l){tt(l,r,null,r.ctx)}}}function mr(){if(Ge=!1,Ae>1001)return;const e=ut;ut=[],hr(e),Ge||(Ae=0,Ke=null)}function nt(e){Ge||(Ge=!0,queueMicrotask(mr)),Ke=e;for(var t=e;t.parent!==null;){t=t.parent;var n=t.f;if(n&(Ee|re)){if(!(n&V))return;t.f^=V}}ut.push(t)}function mn(e,t){var n=e.first,r=[];e:for(;n!==null;){var l=n.f,i=(l&re)!==0,a=i&&(l&V)!==0,f=n.next;if(!a&&!(l&$))if(l&$e){if(i)n.f^=V;else try{De(n)&&Ct(n)}catch(c){tt(c,n,null,n.ctx)}var u=n.first;if(u!==null){n=u;continue}}else l&Ht&&r.push(n);if(f===null){let c=n.parent;for(;c!==null;){if(e===c)break e;var s=c.next;if(s!==null){n=s;continue e}c=c.parent}}n=f}for(var h=0;h<r.length;h++)u=r[h],t.push(u),mn(u,t)}function w(e){var h;var t=e.f,n=(t&J)!==0;if(n&&t&Se){var r=tn(e);return wt(e),r}if(N!==null&&!ae){ee!==null&&ee.includes(e)&&Xn();var l=N.deps;e.rv<Je&&(e.rv=Je,H===null&&l!==null&&l[G]===e?G++:H===null?H=[e]:H.push(e))}else if(n&&e.deps===null)for(var i=e,a=i.parent,f=i;a!==null;)if(a.f&J){var u=a;f=u,a=u.parent}else{var s=a;(h=s.deriveds)!=null&&h.includes(f)||(s.deriveds??(s.deriveds=[])).push(f);break}return n&&(i=e,De(i)&&nn(i)),e.v}function ke(e){var t=ae;try{return ae=!0,e()}finally{ae=t}}const yr=-7169;function ne(e,t){e.f=e.f&yr|t}function ge(e,t=!1,n){R={p:R,c:null,e:null,m:!1,s:e,x:null,l:null},Te&&!t&&(R.l={s:null,u:null,r1:[],r2:K(!1)})}function me(e){const t=R;if(t!==null){e!==void 0&&(t.x=e);const a=t.e;if(a!==null){var n=P,r=N;t.e=null;try{for(var l=0;l<a.length;l++){var i=a[l];te(i.effect),ce(i.reaction),xt(i.fn)}}finally{te(n),ce(r)}}R=t.p,t.m=!0}return e||{}}function br(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(xe in e)ft(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&xe in n&&ft(n)}}}function ft(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{ft(e[r],t)}catch{}const n=_t(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Ut(n);for(let l in r){const i=r[l].get;if(i)try{i.call(e)}catch{}}}}}const wr=["touchstart","touchmove"];function xr(e){return wr.includes(e)}let Rt=!1;function pr(){Rt||(Rt=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function kr(e){var t=N,n=P;ce(null),te(null);try{return e()}finally{ce(t),te(n)}}function Er(e,t,n,r=n){e.addEventListener(t,()=>kr(n));const l=e.__on_r;l?e.__on_r=()=>{l(),r(!0)}:e.__on_r=()=>r(!0),pr()}const yn=new Set,ct=new Set;function Me(e){for(var t=0;t<e.length;t++)yn.add(e[t]);for(var n of ct)n(e)}function Ye(e){var C;var t=this,n=t.ownerDocument,r=e.type,l=((C=e.composedPath)==null?void 0:C.call(e))||[],i=l[0]||e.target,a=0,f=e.__root;if(f){var u=l.indexOf(f);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var s=l.indexOf(t);if(s===-1)return;u<=s&&(a=u)}if(i=l[a]||e.target,i!==t){En(e,"currentTarget",{configurable:!0,get(){return i||n}});var h=N,c=P;ce(null),te(null);try{for(var d,g=[];i!==null;){var m=i.assignedSlot||i.parentNode||i.host||null;try{var p=i["__"+r];if(p!==void 0&&!i.disabled)if(Ze(p)){var[o,...E]=p;o.apply(i,[e,...E])}else p.call(i,e)}catch(x){d?g.push(x):d=x}if(e.cancelBubble||m===t||m===null)break;i=m}if(d){for(let x of g)queueMicrotask(()=>{throw x});throw d}}finally{e.__root=t,delete e.currentTarget,ce(h),te(c)}}}function Cr(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function dt(e,t){var n=P;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function j(e,t){var n=(t&$n)!==0,r=(t&er)!==0,l,i=!e.startsWith("<!>");return()=>{l===void 0&&(l=Cr(i?e:"<!>"+e),n||(l=Ue(l)));var a=r?document.importNode(l,!0):l.cloneNode(!0);if(n){var f=Ue(a),u=a.lastChild;dt(f,u)}else dt(a,a);return a}}function jt(){var e=document.createDocumentFragment(),t=document.createComment(""),n=yt();return e.append(t,n),dt(t,n),e}function I(e,t){e!==null&&e.before(t)}function oe(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n==null?"":n+"")}function Sr(e,t){return Tr(e,t)}const ye=new Map;function Tr(e,{target:t,anchor:n,props:r={},events:l,context:i,intro:a=!0}){nr();var f=new Set,u=c=>{for(var d=0;d<c.length;d++){var g=c[d];if(!f.has(g)){f.add(g);var m=xr(g);t.addEventListener(g,Ye,{passive:m});var p=ye.get(g);p===void 0?(document.addEventListener(g,Ye,{passive:m}),ye.set(g,1)):ye.set(g,p+1)}}};u(vt(yn)),ct.add(u);var s=void 0,h=or(()=>{var c=n??t.appendChild(yt());return Pe(()=>{if(i){ge({});var d=R;d.c=i}l&&(r.$$events=l),s=e(c,r)||{},i&&me()}),()=>{var m;for(var d of f){t.removeEventListener(d,Ye);var g=ye.get(d);--g===0?(document.removeEventListener(d,Ye),ye.delete(d)):ye.set(d,g)}ct.delete(u),c!==n&&((m=c.parentNode)==null||m.removeChild(c))}});return Mr.set(s,h),s}let Mr=new WeakMap;function be(e,t,n=!1){var r=e,l=null,i=null,a=U,f=n?gt:0,u=!1;const s=(c,d=!0)=>{u=!0,h(d,c)},h=(c,d)=>{a!==(a=c)&&(a?(l?ze(l):d&&(l=Pe(()=>d(r))),i&&Ve(i,()=>{i=null})):(i?ze(i):d&&(i=Pe(()=>d(r))),l&&Ve(l,()=>{l=null})))};pt(()=>{u=!1,t(s),u||h(null,null)},f)}function St(e,t){return t}function Or(e,t,n,r){for(var l=[],i=t.length,a=0;a<i;a++)kt(t[a].e,l,!0);var f=i>0&&l.length===0&&n!==null;if(f){var u=n.parentNode;rr(u),u.append(n),r.clear(),ue(e,t[0].prev,t[i-1].next)}fn(l,()=>{for(var s=0;s<i;s++){var h=t[s];f||(r.delete(h.k),ue(e,h.prev,h.next)),fe(h.e,!f)}})}function Tt(e,t,n,r,l,i=null){var a=e,f={flags:t,items:new Map,first:null};{var u=e;a=u.appendChild(yt())}var s=null,h=!1,c=bt(()=>{var d=n();return Ze(d)?d:d==null?[]:vt(d)});pt(()=>{var d=w(c),g=d.length;if(!(h&&g===0)){h=g===0;{var m=N;Ar(d,f,a,l,t,(m.f&$)!==0,r,n)}i!==null&&(g===0?s?ze(s):s=Pe(()=>i(a)):s!==null&&Ve(s,()=>{s=null})),w(c)}})}function Ar(e,t,n,r,l,i,a,f){var u=e.length,s=t.items,h=t.first,c=h,d,g=null,m=[],p=[],o,E,C,x;for(x=0;x<u;x+=1){if(o=e[x],E=a(o,x),C=s.get(E),C===void 0){var Y=c?c.e.nodes_start:n;g=Ir(Y,t,g,g===null?t.first:g.next,o,E,x,r,l,f),s.set(E,g),m=[],p=[],c=g.next;continue}if(Pr(C,o,x),C.e.f&$&&ze(C.e),C!==c){if(d!==void 0&&d.has(C)){if(m.length<p.length){var b=p[0],T;g=b.prev;var k=m[0],v=m[m.length-1];for(T=0;T<m.length;T+=1)Dt(m[T],b,n);for(T=0;T<p.length;T+=1)d.delete(p[T]);ue(t,k.prev,v.next),ue(t,g,k),ue(t,v,b),c=b,g=v,x-=1,m=[],p=[]}else d.delete(C),Dt(C,c,n),ue(t,C.prev,C.next),ue(t,C,g===null?t.first:g.next),ue(t,g,C),g=C;continue}for(m=[],p=[];c!==null&&c.k!==E;)(i||!(c.e.f&$))&&(d??(d=new Set)).add(c),p.push(c),c=c.next;if(c===null)continue;C=c}m.push(C),g=C,c=C.next}if(c!==null||d!==void 0){for(var _=d===void 0?[]:vt(d);c!==null;)(i||!(c.e.f&$))&&_.push(c),c=c.next;var y=_.length;if(y>0){var O=u===0?n:null;Or(t,_,O,s)}}P.first=t.first&&t.first.e,P.last=g&&g.e}function Pr(e,t,n,r){Kt(e.v,t),e.i=n}function Ir(e,t,n,r,l,i,a,f,u,s){var h=(u&Hn)!==0,c=(u&zn)===0,d=h?c?Gt(l):K(l):l,g=u&Vn?K(a):a,m={i:g,v:d,k:i,a:null,e:null,prev:n,next:r};try{return m.e=Pe(()=>f(e,d,g,s),Qt),m.e.prev=n&&n.e,m.e.next=r&&r.e,n===null?t.first=m:(n.next=m,n.e.next=m.e),r!==null&&(r.prev=m,r.e.prev=m.e),m}finally{}}function Dt(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,l=t?t.e.nodes_start:n,i=e.e.nodes_start;i!==r;){var a=et(i);l.before(i),i=a}}function ue(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Nr(e,t,n){xt(()=>{var r=ke(()=>t(e,n==null?void 0:n())||{});if(r!=null&&r.destroy)return()=>r.destroy()})}function bn(e,t){var n=e.__attributes??(e.__attributes={});n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function L(e,t,n,r){var l=e.__attributes??(e.__attributes={});l[t]!==(l[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[In]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Rr(e).includes(t)?e[t]=n:e.setAttribute(t,n))}var Bt=new Map;function Rr(e){var t=Bt.get(e.nodeName);if(t)return t;Bt.set(e.nodeName,t=[]);for(var n,r=e,l=Element.prototype;l!==r;){n=Ut(r);for(var i in n)n[i].set&&t.push(i);r=_t(r)}return t}function Ne(e,t,n){var r=e.__className,l=jr(t);(r!==l||Qt)&&(t==null?e.removeAttribute("class"):e.className=l,e.__className=l)}function jr(e,t){return(e??"")+""}function Dr(e,t,n=t){var r=je();Er(e,"input",l=>{var i=l?e.defaultValue:e.value;if(i=it(e)?at(i):i,n(i),r&&i!==(i=t())){var a=e.selectionStart,f=e.selectionEnd;e.value=i??"",f!==null&&(e.selectionStart=a,e.selectionEnd=Math.min(f,e.value.length))}}),ke(t)==null&&e.value&&n(it(e)?at(e.value):e.value),ln(()=>{var l=t();it(e)&&l===at(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function it(e){var t=e.type;return t==="number"||t==="range"}function at(e){return e===""?null:+e}function wn(e=!1){const t=R,n=t.l.u;if(!n)return;let r=()=>br(t.s);if(e){let l=0,i={};const a=_e(()=>{let f=!1;const u=t.s;for(const s in u)u[s]!==i[s]&&(i[s]=u[s],f=!0);return f&&l++,l});r=()=>w(a)}n.b.length&&ar(()=>{Yt(t,r),Ot(n.b)}),He(()=>{const l=ke(()=>n.m.map(Tn));return()=>{for(const i of l)typeof i=="function"&&i()}}),n.a.length&&He(()=>{Yt(t,r),Ot(n.a)})}function Yt(e,t){if(e.l.s)for(const n of e.l.s)w(n);t()}let qe=!1;function Br(e){var t=qe;try{return qe=!1,[e(),qe]}finally{qe=t}}function qt(e){for(var t=P,n=P;t!==null&&!(t.f&(re|Ee));)t=t.parent;try{return te(t),e()}finally{te(n)}}function B(e,t,n,r){var k;var l=(n&Gn)!==0,i=!Te||(n&Kn)!==0,a=(n&Qn)!==0,f=(n&Zn)!==0,u=!1,s;a?[s,u]=Br(()=>e[t]):s=e[t];var h=xe in e||Pn in e,c=a&&(((k=we(e,t))==null?void 0:k.set)??(h&&t in e&&(v=>e[t]=v)))||void 0,d=r,g=!0,m=!1,p=()=>(m=!0,g&&(g=!1,f?d=ke(r):d=r),d);s===void 0&&r!==void 0&&(c&&i&&Yn(),s=p(),c&&c(s));var o;if(i)o=()=>{var v=e[t];return v===void 0?p():(g=!0,m=!1,v)};else{var E=qt(()=>(l?_e:bt)(()=>e[t]));E.f|=On,o=()=>{var v=w(E);return v!==void 0&&(d=void 0),v===void 0?d:v}}if(!(n&Jn))return o;if(c){var C=e.$$legacy;return function(v,_){return arguments.length>0?((!i||!_||C||u)&&c(_?o():v),v):o()}}var x=!1,Y=!1,b=Gt(s),T=qt(()=>_e(()=>{var v=o(),_=w(b);return x?(x=!1,Y=!0,_):(Y=!1,b.v=v)}));return l||(T.equals=mt),function(v,_){if(arguments.length>0){const y=_?w(T):i&&a?D(v):v;return T.equals(y)||(x=!0,A(b,y),m&&d!==void 0&&(d=y),ke(()=>w(T))),v}return w(T)}}function Yr(e){R===null&&dn(),Te&&R.l!==null?Xr(R).m.push(e):He(()=>{const t=ke(e);if(typeof t=="function")return t})}function qr(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function Lr(){const e=R;return e===null&&dn(),(t,n,r)=>{var i;const l=(i=e.s.$$events)==null?void 0:i[t];if(l){const a=Ze(l)?l.slice():[l],f=qr(t,n,r);for(const u of a)u.call(e.x,f);return!f.defaultPrevented}return!0}}function Xr(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Fr="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Fr);Un();var Wr=j('<footer class="site-footer svelte-ln846r"><li class="svelte-ln846r"> <a href="https://rasaichimori.com" class="svelte-ln846r">rasaichimori</a></li></footer>');function Ur(e,t){ge(t,!1),wn();var n=Wr(),r=M(n),l=M(r);z(i=>oe(l,`©${i??""} `),[()=>new Date().getFullYear()],bt),I(e,n),me()}const Hr="/assets/question-CU3Gwy_3.png";var Vr=(e,t)=>A(t,!0),zr=(e,t)=>e.key==="Enter"&&A(t,!0),Gr=(e,t)=>A(t,!1),Kr=j(`<div id="info-modal" class="svelte-1wf18ab"><button id="close-button" class="svelte-1wf18ab">x</button> <p>This is a simulation that shows uses a 2D ball physics engine that I
        created from scratch without any physics libraries! Just pure
        JavaScript. I am also using p5 to display the circles on the canvas.</p> <p>To modify the parameters, click the show setting toggle at the bottom
        right. This you allow you to change how the simulation looks, as well as
        parameters such as gravity, the number of balls, and how they interact.</p> <p>I followed an incredibly helpful youtube tutorial series by <a href="https://www.youtube.com/@javidx9" target="_blank">javidx9</a> which explained the main concepts in detail and demonstrated them in c++.
        At the moment, there are no other rigid bodies at play because circles are
        the easiest to calculate without angular velocities. Of course, there are
        plenty of amazing libraries like matter.js that wouldn’t require you to create
        a physics library from scratch, but you this was just a project to test myself
        with.</p> <p>Enjoy!</p></div>`),Jr=j('<div id="info"><div id="question-image" role="button" aria-label="Open info modal" tabindex="0" class="svelte-1wf18ab"><img alt="question" class="svelte-1wf18ab"></div> <!></div>');function Qr(e){let t=q(!1);var n=Jr(),r=M(n);r.__click=[Vr,t],r.__keydown=[zr,t];var l=M(r);L(l,"src",Hr);var i=S(r,2);{var a=f=>{var u=Kr(),s=M(u);s.__click=[Gr,t],I(f,u)};be(i,f=>{w(t)&&f(a)})}I(e,n)}Me(["click","keydown"]);var Zr=(e,t,n)=>t(w(n).value),$r=j('<div class="radio-button svelte-194qw87"><input type="radio" class="svelte-194qw87"> <label class="svelte-194qw87"> </label></div>'),el=j('<div class="radio-group svelte-194qw87" id="number-mode"></div>');function ot(e,t){ge(t,!0);let n=B(t,"selectedOption",15);const r=i=>{var a;n(i),(a=t.onChange)==null||a.call(t,i)};var l=el();Tt(l,21,()=>t.options,St,(i,a,f)=>{var u=$r(),s=M(u);s.__change=[Zr,r,a];var h=S(s,2),c=M(h);z(()=>{L(s,"id",`${t.name}-${f}`),L(s,"name",t.name),bn(s,n()===w(a).value),L(h,"for",`${t.name}-${f}`),oe(c,w(a).label)}),I(i,u)}),I(e,l),me()}Me(["change"]);const tl=(e,t,n)=>{var l;const r=e.target;t(r.checked),(l=n.onChange)==null||l.call(n,t())};var nl=j('<label class="switch svelte-1yxjvt"><input type="checkbox" id="controls-sw" class="svelte-1yxjvt"> <span class="sw round svelte-1yxjvt"></span></label>');function rl(e,t){ge(t,!0);let n=B(t,"toggled",15);var r=nl(),l=M(r);l.__change=[tl,n,t],z(()=>bn(l,n())),I(e,r),me()}Me(["change"]);var ll=j('<div class="switch-box svelte-1mqof47" id="show-controls"><p id="controls-label" class="svelte-1mqof47"> </p> <!></div>');function Qe(e,t){let n=B(t,"toggled",15);var r=ll(),l=M(r),i=M(l),a=S(l,2);rl(a,{get onChange(){return t.onChange},get toggled(){return n()},set toggled(f){n(f)}}),z(()=>oe(i,t.label)),I(e,r)}const il="/assets/setvel-JB-MuW5n.gif",al="/assets/addball-BI_CWtWY.gif",ol="/assets/addseg-C_kM8Xzl.gif",sl="/assets/remove-BPUcj0Qt.gif";var ul=(e,t)=>t(1),fl=(e,t)=>t(5),cl=(e,t)=>t(10),dl=(e,t)=>t(20),vl=(e,t)=>t(1e4),_l=j('<button id="change-all">all</button>'),hl=j(`<!> <div id="edit-mode-text" class="mode-text svelte-5pgmj1"><p class="svelte-5pgmj1">This mode allows you to edit segments and balls at the same time. To
          edit the segment, click the edge of the segment and drag to move that
          point of the segment.</p> <p class="svelte-5pgmj1">For the balls, there are two ways to edit them. Within edit mode, you
          can chose to change the ball’s position when one is click and dragged.
          To do this, the bottom toggle button should say “set position on
          select”</p> <p class="svelte-5pgmj1">You can give any ball a certain velocity with a click and drag as
          well.</p> <img class="mode-gif svelte-5pgmj1" alt="set velocity gif"></div>`,1),gl=j(`<div id="add-ball-mode-text" class="mode-text svelte-5pgmj1"><p class="svelte-5pgmj1">This mode allows you to create a ball on click. The ball will be
            created where your mouse is. If you click and drag, you’ll be able
            to set the size of the ball as well.</p> <img class="mode-gif svelte-5pgmj1" alt="add ball gif"></div>`),ml=j(`<div id="add-segment-mode-text" class="mode-text svelte-5pgmj1"><p class="svelte-5pgmj1">This mode allows you to create a segment on click. Click and drag
            anywhere on the simulation screen to create the segment.</p> <img class="mode-gif svelte-5pgmj1" alt="add seg gif"></div>`),yl=j(`<div id="remove-objects-mode-text" class="mode-text svelte-5pgmj1"><p class="svelte-5pgmj1">To remove any item on the simulation screen, just click on it. You can
          also hold down the mouse button and move it around to remove all the
          objects the mouse comes in contact with.</p> <img class="mode-gif svelte-5pgmj1" alt="remove gif"></div>`),bl=j('<div id="controls-cont"><!> <div><button id="change-1">1</button> <button id="change-5">5</button> <button id="change-10">10</button> <button id="change-20">20</button> <!></div> <p class="svelte-5pgmj1">Modes:</p> <!> <div id="modes-explained" class="svelte-5pgmj1"><!></div></div>');function wl(e,t){ge(t,!0);let n=B(t,"editMode",15),r=B(t,"selectMode",15),l=q("add");const i=k=>{var v;(v=t.changeNumberOfBalls)==null||v.call(t,k*(w(l)==="add"?1:-1))},a=k=>{k==="add"&&n()==="remove"&&n("edit"),k==="remove"&&n()!=="edit"&&n("remove"),A(l,D(k))};var f=bl(),u=M(f);ot(u,{name:"number-mode",options:[{value:"add",label:"Add"},{value:"remove",label:"Remove"}],get selectedOption(){return w(l)},onChange:a});var s=S(u,2),h=M(s);h.__click=[ul,i];var c=S(h,2);c.__click=[fl,i];var d=S(c,2);d.__click=[cl,i];var g=S(d,2);g.__click=[dl,i];var m=S(g,2);{var p=k=>{var v=_l();v.__click=[vl,i],I(k,v)};be(m,k=>{w(l)==="remove"&&k(p)})}var o=S(s,4);{var E=k=>{ot(k,{name:"ball-mode",options:[{value:"edit",label:"Edit"},{value:"addBall",label:"Add Ball"},{value:"addSeg",label:"Add Segment"}],get selectedOption(){return n()},set selectedOption(v){n(v)}})},C=k=>{ot(k,{name:"ball-mode",options:[{value:"edit",label:"Edit"},{value:"remove",label:"Remove Object"}],get selectedOption(){return n()},set selectedOption(v){n(v)}})};be(o,k=>{w(l)==="add"?k(E):k(C,!1)})}var x=S(o,2),Y=M(x);{var b=k=>{var v=hl(),_=lt(v);const y=_e(()=>`Set ${r()} on select`),O=_e(()=>r()==="position");Qe(_,{get label(){return w(y)},get toggled(){return w(O)},onChange:Z=>{r(Z?"position":"velocity")}});var X=S(_,2),Q=S(M(X),6);L(Q,"src",il),I(k,v)},T=k=>{var v=jt(),_=lt(v);{var y=X=>{var Q=jt(),Z=lt(Q);{var Be=le=>{var Oe=gl(),rt=S(M(Oe),2);L(rt,"src",al),I(le,Oe)},de=le=>{var Oe=ml(),rt=S(M(Oe),2);L(rt,"src",ol),I(le,Oe)};be(Z,le=>{n()==="addBall"?le(Be):le(de,!1)})}I(X,Q)},O=X=>{var Q=yl(),Z=S(M(Q),2);L(Z,"src",sl),I(X,Q)};be(_,X=>{w(l)==="add"?X(y):X(O,!1)},!0)}I(k,v)};be(Y,k=>{n()==="edit"?k(b):k(T,!1)})}z(()=>Ne(f,`controls-cont ${(t.showControls?"show":"hide")??""} svelte-5pgmj1`)),I(e,f),me()}Me(["click"]);const xl="modulepreload",pl=function(e){return"/"+e},Lt={},kl=function(t,n,r){let l=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),f=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));l=Promise.allSettled(n.map(u=>{if(u=pl(u),u in Lt)return;Lt[u]=!0;const s=u.endsWith(".css"),h=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":xl,s||(c.as="script"),c.crossOrigin="",c.href=u,f&&c.setAttribute("nonce",f),document.head.appendChild(c),s)return new Promise((d,g)=>{c.addEventListener("load",d),c.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=a,window.dispatchEvent(f),!f.defaultPrevented)throw a}return l.then(a=>{for(const f of a||[])f.status==="rejected"&&i(f.reason);return t().catch(i)})};var El=j('<div class="m-0"></div>');function Cl(e,t){ge(t,!1);let n=B(t,"target",12,void 0),r=B(t,"sketch",8,void 0),l=B(t,"parentDivStyle",8,"display: block;"),i=B(t,"debug",8,!1),a;const f=Lr(),u={ref(){f("ref",n())},instance(){f("instance",a)}};function s(d){return n(d),{destroy(){n(void 0)}}}function h(d,g){return g.forEach(([m,p])=>d[m]=p),d}Yr(async()=>{const d=await kl(()=>import("./p5.min-ChQDYh9k.js").then(o=>o.p),[]),{default:g}=d,p=Object.entries(d).filter(([o,E])=>E instanceof Function&&o[0]!=="_"&&o!=="default");i()&&console.log("available p5 native classes",p),a=new g(o=>(o=h(o,p),i()&&console.log("p5 instance",o),window._p5Instance=o,r()(o)),n()),u.ref(),u.instance()}),wn();var c=El();Nr(c,d=>s==null?void 0:s(d)),z(()=>L(c,"style",l())),I(e,c),me()}class Xe{constructor(t,n,r,l,i,a,f){F(this,"x");F(this,"y");F(this,"o");F(this,"velocityX");F(this,"velocityY");F(this,"a",{x:0,y:0});F(this,"id");F(this,"radius");F(this,"mass");F(this,"simTimeRemaining",0);this.x=t,this.y=n,this.o={x:t,y:n},this.velocityX=r,this.velocityY=l,this.id=f,this.radius=i,this.mass=a}}function Sl(e,t){return W(e,t)<=e.radius+t.radius}function W(e,t){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function Tl(e,t,n){var r=e;return r>n&&(r=n),r<t&&(r=t),r}class Xt{constructor(t,n,r,l){F(this,"start");F(this,"end");F(this,"radius");F(this,"id");this.start=t,this.end=n,this.id=l,this.radius=r}}function Ft(e,t){const n=W(e.start,e.end),r=W(t,e.start),l=W(t,e.end);if(r+l<=n+e.radius&&r<n&&l<n){const i=Math.abs((e.end.x-e.start.x)*(e.start.y-t.y)-(e.start.x-t.x)*(e.end.y-e.start.y)),a=W(e.start,e.end);return i/a<e.radius}return W(e.start,t)<e.radius||W(e.end,t)<e.radius}function Ml(e){const{Allballs:t,Allsegs:n,gravity:r,bounciness:l,bounceOffEdges:i,width:a,height:f}=e,u=new Map;let s=4;const h=1/s;let c=15;for(let d=0;d<s;d++){for(const[g,m]of t)(isNaN(m.x)||isNaN(m.y)||Math.abs(m.a.x)>99999||Math.abs(m.a.y)>99999)&&t.delete(g),m.simTimeRemaining=h;for(let g=0;g<c;g++){for(const[p,o]of t)o.simTimeRemaining>0&&(o.o.x=o.x,o.o.y=o.y,o.a.x=-o.velocityX*.01,o.a.y=-o.velocityY*.01+r,o.velocityX+=o.a.x*o.simTimeRemaining,o.velocityY+=o.a.y*o.simTimeRemaining,o.x+=o.velocityX*o.simTimeRemaining,o.y+=o.velocityY*o.simTimeRemaining,i?(o.x<o.radius&&(o.x=o.radius,o.velocityX*=-1),o.x>a-o.radius&&(o.x=a-o.radius,o.velocityX*=-1),o.y<o.radius&&(o.y=o.radius,o.velocityY*=-1),o.y>f-o.radius&&(o.y=f-o.radius,o.velocityY*=-1)):(o.x<-o.radius&&(o.x=a+o.radius),o.x>a+o.radius&&(o.x=-o.radius),o.y<-o.radius&&(o.y=f+o.radius),o.y>f+o.radius&&(o.y=-o.radius)));const m=[];for(const[p,o]of t){for(const[Y,b]of n){let T=b.end.x-b.start.x,k=b.end.y-b.start.y,v=o.x-b.start.x,_=o.y-b.start.y,y=T*T+k*k,O=Math.max(0,Math.min(y,T*v+k*_))/y,X=b.start.x+O*T,Q=b.start.y+O*k,Z=Math.sqrt((o.x-X)*(o.x-X)+(o.y-Q)*(o.y-Q));if(Z<=o.radius+b.radius){const Be=`${u.size}`,de=new Xe(X,Q,-o.velocityX,-o.velocityY,b.radius,o.mass*.8,Be);u.set(Be,de),m.push({ball1:o,ball2:de});let le=Z-o.radius-de.radius;o.x-=le*(o.x-de.x)/Z,o.y-=le*(o.y-de.y)/Z}}for(const[Y,b]of t)if(o.id!=b.id&&Sl(o,b)){let T=W(o,b),k=(T-o.radius-b.radius)/2;o.x-=k*(o.x-b.x)/T,o.y-=k*(o.y-b.y)/T,b.x+=k*(o.x-b.x)/T,b.y+=k*(o.y-b.y)/T,m.push({ball1:o,ball2:b})}let E=Math.sqrt(o.velocityX*o.velocityX+o.velocityY*o.velocityY),x=Math.sqrt((o.x-o.o.x)*(o.x-o.o.x)+(o.y-o.o.y)*(o.y-o.o.y))/E;o.simTimeRemaining=o.simTimeRemaining-x}for(const p of m){const o=p.ball1,E=p.ball2;if(o===void 0||E===void 0)continue;let C=W(o,E),x=(E.x-o.x)/C,Y=(E.y-o.y)/C,b=-Y,T=x,k=o.velocityX*b+o.velocityY*T,v=E.velocityX*b+E.velocityY*T,_=o.velocityX*x+o.velocityY*Y,y=E.velocityX*x+E.velocityY*Y,O=l*(_*(o.mass-E.mass)+2*E.mass*y)/(o.mass+E.mass),X=(y*(E.mass-o.mass)+2*o.mass*_)/(o.mass+E.mass);p.ball1.velocityX=b*k+x*O,p.ball1.velocityY=T*k+Y*O,p.ball2.velocityX=b*v+x*X,p.ball2.velocityY=T*v+Y*X}u.clear()}}}var Ol=j('<div class="bottom-info svelte-1efpgih"><p class="svelte-1efpgih">fps: <span> </span></p> <p class="svelte-1efpgih">ball count: <span id="ballCount"> </span></p></div>');function Al(e,t){var n=Ol(),r=M(n),l=S(M(r)),i=M(l),a=S(r,2),f=S(M(a)),u=M(f);z(()=>{Ne(l,`frame-rate-display ${(t.fullScreen?"full-screen":"")??""} svelte-1efpgih`),oe(i,t.frameRate),oe(u,t.ballCount)}),I(e,n)}var Pl=j('<div id="cont"><div id="p5canv"><!></div> <!></div>');function Il(e,t){ge(t,!0);let n=B(t,"changeNumberOfBalls",15),r=q(0),l=q(0),i,a,f=new Map,u=new Map,s,h=q(void 0),c=!1;He(()=>{var v;if(window.innerWidth>800){if(w(h)===void 0)return;if(t.fullScreen){w(h).resizeCanvas(window.innerWidth,window.innerHeight,!0);for(const[_,y]of f)y.x+=window.innerWidth/2-500/2,y.y+=window.innerHeight/2-500/2;for(const[_,y]of u)y.start.x+=window.innerWidth/2-500/2,y.end.x+=window.innerWidth/2-500/2,y.start.y+=window.innerHeight/2-500/2,y.end.y+=window.innerHeight/2-500/2}else{if(!c){c=!0;return}w(h).resizeCanvas(500,500,!0);for(const[_,y]of f)y.x-=window.innerWidth/2-500/2,y.y-=window.innerHeight/2-500/2;for(const[_,y]of u)y.start.x-=window.innerWidth/2-500/2,y.end.x-=window.innerWidth/2-500/2,y.start.y-=window.innerHeight/2-500/2,y.end.y-=window.innerHeight/2-500/2}}else(v=w(h))==null||v.resizeCanvas(500,500,!0)}),n(v=>{if(v>0){if(w(h)===void 0)return;for(let _=0;_<v;_++){let y=Math.random()*5+5;const O=`random${m}`;f.set(O,new Xe(Math.random()*w(h).width,Math.random()*w(h).height,(Math.random()-.5)*2,(Math.random()-.5)*2,y,y*50,O)),m++}}else for(let _=0;_<-v;_++){if(f.size===0)return;const[y]=Array.from(f)[0];f.delete(y)}});const d=v=>{A(h,D(v)),v.setup=()=>{v.createCanvas(500,500);for(let _=0;_<20;_++){let y=Math.random()*5+5;f.set(`ball-${_}`,new Xe(Math.random()*v.width,Math.random()*v.height,(Math.random()-.5)*2,(Math.random()-.5)*2,y,y*50,`ball-${_}`))}for(let _=0;_<5;_++)u.set(`Segment-${_}`,new Xt({x:Math.random()*v.width,y:Math.random()*v.height},{x:Math.random()*v.width,y:Math.random()*v.height},5,`Segment-${_}`))},v.draw=()=>{v.background(t.background),p(v),Ml({Allballs:f,Allsegs:u,gravity:t.gravity,bounciness:t.bounciness,bounceOffEdges:t.bounceOffEdges,width:v.width,height:v.height}),A(r,D(Math.round(v.frameRate()))),A(l,D(f.size));for(const[_,y]of f)E(v,y),x(v,y);for(const[_,y]of u)y.radius=t.barThickness,o(v,y),C(v,y);i!==void 0&&(v.stroke("blue"),v.strokeWeight(5),v.line(i.x,i.y,v.mouseX,v.mouseY))}};let g=!1,m=0;function p(v){const _={x:v.mouseX,y:v.mouseY},y=_.x>0&&_.x<v.width&&_.y>0&&_.y<v.height;if(v.mouseIsPressed){if(t.editMode==="addBall"&&y)if(s===void 0){m++;const O=`user${m}`;s="addingBall",f.set(O,new Xe(_.x,_.y,0,0,0,0,O))}else{const O=f.get(`user${m}`);if(O===void 0)return;O.velocityX=0,O.velocityY=0,O.radius=Tl(W(O,_),0,50),O.mass=O.radius*50}if(t.editMode==="addSeg"&&y)if(s){const O=u.get(`seg${m}`);if(O===void 0)return;O.end=_}else{m++;const O=`seg${m}`;s="addingSeg",u.set(O,new Xt(_,_,5,O))}}else s=void 0,i!==void 0&&(t.selectMode==="velocity"&&(i.velocityX=.05*(i.x-_.x),i.velocityY=.05*(i.y-_.y)),i=void 0),a=void 0}function o(v,_){const y={x:v.mouseX,y:v.mouseY};if(Ft(_,y)&&v.mouseIsPressed&&t.editMode==="remove"&&u.delete(_.id),v.mouseIsPressed){if(t.editMode!=="edit")return;a===void 0?s||(W(_.start,y)<=_.radius&&(s="segment selected",a=_,g=!0),W(_.end,y)<=_.radius&&(s="segment selected",a=_,g=!1)):(a==null?void 0:a.id)===_.id&&(g?(_.start.x=y.x,_.start.y=y.y):(_.end.x=y.x,_.end.y=y.y))}}function E(v,_){const y={x:v.mouseX,y:v.mouseY};v.mouseIsPressed&&(W(_,y)<=_.radius&&t.editMode==="remove"&&f.delete(_.id),t.editMode==="edit"&&(i===void 0&&!s?W(_,y)<=_.radius&&(i=_,s="ball selected"):(i==null?void 0:i.id)===_.id&&t.selectMode=="position"&&(_.x=y.x,_.y=y.y)))}function C(v,_){Ft(_,{x:v.mouseX,y:v.mouseY})&&(v.strokeWeight(_.radius*2+2),v.stroke(3,144,252)),(a==null?void 0:a.id)===_.id&&(v.strokeWeight(_.radius*2+2),v.stroke(255)),v.line(_.start.x,_.start.y,_.end.x,_.end.y);const y=v.color(t.barColor);y.setAlpha(128),v.stroke(y),v.strokeWeight(_.radius*2),v.line(_.start.x,_.start.y,_.end.x,_.end.y),v.noStroke(),y.setAlpha(255),v.fill(y),v.ellipse(_.start.x,_.start.y,_.radius*2),v.ellipse(_.end.x,_.end.y,_.radius*2)}function x(v,_){const y={x:v.mouseX,y:v.mouseY};v.noStroke(),(t.editMode==="edit"||t.editMode==="remove")&&((i==null?void 0:i.id)===_.id||W(_,y)<=_.radius)&&(v.strokeWeight(5),v.stroke(3,144,252)),v.fill(t.ballColor),v.ellipse(_.x,_.y,_.radius*2)}var Y=Pl(),b=M(Y),T=M(b);Cl(T,{sketch:d});var k=S(b,2);return Al(k,{get fullScreen(){return t.fullScreen},get frameRate(){return w(r)},get ballCount(){return w(l)}}),z(()=>{Ne(Y,`canvas-container ${(t.fullScreen?"fullscreen":"")??""} svelte-1m8eiia`),Ne(b,`p5canv ${(t.fullScreen?"fullscreen":"")??""}`)}),I(e,Y),me({checkUserAction:p})}var Nl=(e,t,n)=>t(w(n)),Rl=j('<button class="bg-thumb svelte-cln6rs"></button>'),jl=j('<div class="bg-cont"><p> </p> <div class="bg-mode svelte-cln6rs"></div></div>');function Dl(e,t){let n=B(t,"selectedBg",15);var r=jl(),l=M(r),i=M(l),a=S(l,2);Tt(a,21,()=>t.backgrounds,St,(f,u)=>{var s=Rl();s.__click=[Nl,n,u],z(()=>{L(s,"style",`background: ${w(u)??""}`),L(s,"aria-label",`Select background ${w(u)??""}`)}),I(f,s)}),z(()=>oe(i,t.label)),I(e,r)}Me(["click"]);var Bl=(e,t,n)=>t(w(n)),Yl=j('<button class="color svelte-qps0an"></button>'),ql=j('<div class="color-cont svelte-qps0an"><p class="svelte-qps0an"> </p> <div class="color-mode svelte-qps0an"></div></div>');function Wt(e,t){let n=B(t,"selectedColor",15);var r=ql(),l=M(r),i=M(l),a=S(l,2);Tt(a,21,()=>t.colors,St,(f,u)=>{var s=Yl();s.__click=[Bl,n,u],z(()=>{L(s,"style",`background: ${w(u)??""}`),L(s,"aria-label",`Select color ${w(u)??""}`)}),I(f,s)}),z(()=>oe(i,`${t.label??""}:`)),I(e,r)}Me(["click"]);var Ll=j('<div class="slider-box svelte-adr4r6"><p class="svelte-adr4r6"> </p> <p class="values svelte-adr4r6"> </p> <input class="slider svelte-adr4r6" type="range"></div>');function st(e,t){let n=B(t,"value",15);var r=Ll(),l=M(r),i=M(l),a=S(l,2),f=M(a),u=S(a,2);z(()=>{oe(i,`${t.label??""}:`),oe(f,n()),L(u,"min",t.min),L(u,"max",t.max),L(u,"step",t.step)}),Dr(u,n),I(e,r)}var Xl=j('<div id="slider-cont"><!> <!> <!> <!> <!> <!> <!> <!></div>');function Fl(e,t){let n=B(t,"fullScreen",15),r=B(t,"bounceOffEdges",15),l=B(t,"ballColor",15),i=B(t,"barColor",15),a=B(t,"background",15),f=B(t,"gravity",15),u=B(t,"barThickness",15),s=B(t,"bounciness",15);var h=Xl(),c=M(h);st(c,{label:"gravity",min:0,max:.7,step:.01,get value(){return f()},set value(x){f(x)}});var d=S(c,2);Wt(d,{label:"ball color",colors:["#eee","#444","#d6d2b5","#93ae88","#d48c8c","#a2b9c5","#ff0000"],get selectedColor(){return l()},set selectedColor(x){l(x)}});var g=S(d,2);Wt(g,{label:"bar color",colors:["rgb(255, 255, 255)","rgb(20, 20, 20)","rgb(255, 0, 255)","rgb(147, 255, 136)","rgb(255, 255, 207)","rgb(0, 100, 255)","rgb(255, 150, 0)"],get selectedColor(){return i()},set selectedColor(x){i(x)}});var m=S(g,2);Qe(m,{label:"bounce off edges:",get toggled(){return r()},set toggled(x){r(x)}});var p=S(m,2);st(p,{label:"bar thickness",min:1,max:30,step:1,get value(){return u()},set value(x){u(x)}});var o=S(p,2);st(o,{label:"bounciness",min:0,max:1.1,step:.01,get value(){return s()},set value(x){s(x)}});var E=S(o,2);Dl(E,{label:"background color:",backgrounds:["#fff","#ddddd9","#000","#eeede9"],get selectedBg(){return a()},set selectedBg(x){a(x)}});var C=S(E,2);Qe(C,{label:"full screen:",get toggled(){return n()},set toggled(x){n(x)}}),z(()=>Ne(h,`slider-cont ${(t.showControls?"show":"hide")??""} svelte-33724l`)),I(e,h)}var Wl=j('<div class="container"><div class="background svelte-1rwsj5a"></div> <p id="header" class="title svelte-1rwsj5a">ball physics</p> <!> <!> <!> <div class="show-controls svelte-1rwsj5a"><!></div> <!> <!></div>');function Ul(e){let t=q(!0),n=q(!1),r=q(!1),l=q("#eee"),i=q("rgb(0, 100, 255)"),a=q("#000"),f=q(.08),u=q(5),s=q(1),h=q("edit"),c=q("position"),d=q(void 0);var g=Wl(),m=S(M(g),4);Il(m,{get fullScreen(){return w(n)},get bounceOffEdges(){return w(r)},get editMode(){return w(h)},get selectMode(){return w(c)},get ballColor(){return w(l)},get barColor(){return w(i)},get background(){return w(a)},get gravity(){return w(f)},get barThickness(){return w(u)},get bounciness(){return w(s)},get changeNumberOfBalls(){return w(d)},set changeNumberOfBalls(b){A(d,D(b))}});var p=S(m,2);wl(p,{get showControls(){return w(t)},get changeNumberOfBalls(){return w(d)},get editMode(){return w(h)},set editMode(b){A(h,D(b))},get selectMode(){return w(c)},set selectMode(b){A(c,D(b))}});var o=S(p,2);Fl(o,{get showControls(){return w(t)},get fullScreen(){return w(n)},set fullScreen(b){A(n,D(b))},get bounceOffEdges(){return w(r)},set bounceOffEdges(b){A(r,D(b))},get ballColor(){return w(l)},set ballColor(b){A(l,D(b))},get barColor(){return w(i)},set barColor(b){A(i,D(b))},get background(){return w(a)},set background(b){A(a,D(b))},get gravity(){return w(f)},set gravity(b){A(f,D(b))},get barThickness(){return w(u)},set barThickness(b){A(u,D(b))},get bounciness(){return w(s)},set bounciness(b){A(s,D(b))}});var E=S(o,2),C=M(E);Qe(C,{label:"Show Controls",get toggled(){return w(t)},set toggled(b){A(t,D(b))}});var x=S(E,2);Qr(x);var Y=S(x,2);Ur(Y,{}),I(e,g)}Sr(Ul,{target:document.getElementById("app")});
